-- ================= TELEPORT GUI (FIXED & PERSISTENT) =================
local teleportGui

local function createTeleportGUI()
    local pg = player:WaitForChild("PlayerGui")

    if teleportGui then
        teleportGui:Destroy()
    end

    teleportGui = Instance.new("ScreenGui")
    teleportGui.Name = "TeleportGUI"
    teleportGui.ResetOnSpawn = false
    teleportGui.Parent = pg

    for i, info in ipairs(teleportPoints) do
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(0,150,0,40)
        btn.Position = UDim2.new(1,-170,0,80+(i-1)*50)
        btn.Text = info[1]
        btn.BackgroundColor3 = Color3.fromRGB(0,0,0)
        btn.BorderColor3 = Color3.fromRGB(128,0,255)
        btn.BorderSizePixel = 2
        btn.TextColor3 = Color3.fromRGB(255,255,0)
        btn.BackgroundTransparency = 0.25
        btn.Font = Enum.Font.SourceSansBold
        btn.TextScaled = true
        btn.Parent = teleportGui

        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0,10)
        corner.Parent = btn

        btn.MouseButton1Click:Connect(function()
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                player.Character.HumanoidRootPart.CFrame =
                    CFrame.new(info[2] + Vector3.new(0,5,0))
            end
        end)
    end
end

-- create once
createTeleportGUI()

-- recreate safely after respawn
player.CharacterAdded:Connect(function()
    task.wait(0.5)
    createTeleportGUI()
end)
